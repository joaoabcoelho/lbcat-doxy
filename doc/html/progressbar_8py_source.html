<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cat: /home/eleclhcb/LHCb/lbcat-cmake/CatPython/python/progressbar.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>/home/eleclhcb/LHCb/lbcat-cmake/CatPython/python/progressbar.py</h1><a href="progressbar_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespaceprogressbar.html">00001</a> <span class="keyword">import</span> sys
<a name="l00002"></a>00002 <span class="keyword">import</span> time
<a name="l00003"></a>00003 
<a name="l00004"></a><a class="code" href="classprogressbar_1_1ProgressBar.html">00004</a> <span class="keyword">class </span><a class="code" href="classprogressbar_1_1ProgressBar.html">ProgressBar</a>(object):
<a name="l00005"></a>00005     <span class="stringliteral">&quot;&quot;&quot;ProgressBar class holds the options of the progress bar.</span>
<a name="l00006"></a>00006 <span class="stringliteral">    The options are:</span>
<a name="l00007"></a>00007 <span class="stringliteral">        start   State from which start the progress. For example, if start is</span>
<a name="l00008"></a>00008 <span class="stringliteral">                5 and the end is 10, the progress of this state is 50%</span>
<a name="l00009"></a>00009 <span class="stringliteral">        end     State in which the progress has terminated.</span>
<a name="l00010"></a>00010 <span class="stringliteral">        width   --</span>
<a name="l00011"></a>00011 <span class="stringliteral">        fill    String to use for &quot;filled&quot; used to represent the progress</span>
<a name="l00012"></a>00012 <span class="stringliteral">        blank   String to use for &quot;filled&quot; used to represent remaining space.</span>
<a name="l00013"></a>00013 <span class="stringliteral">        format  Format</span>
<a name="l00014"></a>00014 <span class="stringliteral">        incremental</span>
<a name="l00015"></a>00015 <span class="stringliteral">    &quot;&quot;&quot;</span>
<a name="l00016"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a7ad95b3ae7b580117dd48355a3e967ae">00016</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1ProgressBar.html#a7ad95b3ae7b580117dd48355a3e967ae">__init__</a>(self, process=&quot;     &quot;, start=0, end=10, width=12, fill=&apos;=&apos;, blank=&apos;.&apos;, format=&apos;running %(process)s [%(fill)s%(blank)s] %(progress)s%%<span class="stringliteral">&apos;, incremental=True):</span>
<a name="l00017"></a>00017 <span class="stringliteral">        super(ProgressBar, self).__init__()</span>
<a name="l00018"></a>00018 <span class="stringliteral"></span>
<a name="l00019"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#afa2d297abaa373dfe45a2036b0d3c123">00019</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#afa2d297abaa373dfe45a2036b0d3c123">start</a> = start</span>
<a name="l00020"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a46470a910a06dc2328d74c9da269f800">00020</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a46470a910a06dc2328d74c9da269f800">end</a> = end</span>
<a name="l00021"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a818a39d7acf131db44f1ce01c3a1ea98">00021</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a818a39d7acf131db44f1ce01c3a1ea98">width</a> = width</span>
<a name="l00022"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a6688b4a5e97312c48e61f7e3f96eeca0">00022</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a6688b4a5e97312c48e61f7e3f96eeca0">fill</a> = fill</span>
<a name="l00023"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#adb0492e85eacafa26a86c115791e5708">00023</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#adb0492e85eacafa26a86c115791e5708">blank</a> = blank</span>
<a name="l00024"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a7c67be1a98afb82bcbc6ddf97d632662">00024</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a7c67be1a98afb82bcbc6ddf97d632662">format</a> = format</span>
<a name="l00025"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#aedc9b9f8823b12386c934d1427c35e0a">00025</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#aedc9b9f8823b12386c934d1427c35e0a">incremental</a> = incremental</span>
<a name="l00026"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a96358aecb3816a174bae4795122f5c1b">00026</a> <span class="stringliteral">        self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a96358aecb3816a174bae4795122f5c1b">step</a> = 100 / float(width) </span><span class="comment">#fix</span>
<a name="l00027"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a9a097a5d47063a94117196891ac4b666">00027</a>         self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a9a097a5d47063a94117196891ac4b666">process</a> = process
<a name="l00028"></a>00028         self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a1e3174a60591ce40f957310b350d62d4">reset</a>()
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a1f77ba8c29d99201812d6072c196c442">00030</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1ProgressBar.html#a1f77ba8c29d99201812d6072c196c442">__add__</a>(self, increment):
<a name="l00031"></a>00031         increment = self.<a class="code" href="classprogressbar_1_1ProgressBar.html#af11b2da67d3c42a65defe21b4abf7351">_get_progress</a>(increment)
<a name="l00032"></a>00032         <span class="keywordflow">if</span> 100 &gt; self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> + increment:
<a name="l00033"></a>00033             self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> += increment
<a name="l00034"></a>00034         <span class="keywordflow">else</span>:
<a name="l00035"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">00035</a>             self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> = 100
<a name="l00036"></a>00036         <span class="keywordflow">return</span> self
<a name="l00037"></a>00037     
<a name="l00038"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#ad7acb97d5893c7c67d9e1c8224364df9">00038</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1ProgressBar.html#ad7acb97d5893c7c67d9e1c8224364df9">__str__</a>(self):
<a name="l00039"></a>00039         progressed = int(self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> / self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a96358aecb3816a174bae4795122f5c1b">step</a>) <span class="comment">#fix</span>
<a name="l00040"></a>00040         fill = progressed * self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a6688b4a5e97312c48e61f7e3f96eeca0">fill</a>
<a name="l00041"></a>00041         proc = self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a9a097a5d47063a94117196891ac4b666">process</a>
<a name="l00042"></a>00042         blank = (self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a818a39d7acf131db44f1ce01c3a1ea98">width</a> - progressed) * self.<a class="code" href="classprogressbar_1_1ProgressBar.html#adb0492e85eacafa26a86c115791e5708">blank</a>
<a name="l00043"></a>00043         <span class="keywordflow">return</span> self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a7c67be1a98afb82bcbc6ddf97d632662">format</a> % {<span class="stringliteral">&apos;process&apos;</span>: proc, <span class="stringliteral">&apos;fill&apos;</span>: fill, <span class="stringliteral">&apos;blank&apos;</span>: blank, <span class="stringliteral">&apos;progress&apos;</span>: int(self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a>)}
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#aef4ad61d3b7ec3f1b8514ee563268d4c">00045</a>     __repr__ = __str__
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#af11b2da67d3c42a65defe21b4abf7351">00047</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1ProgressBar.html#af11b2da67d3c42a65defe21b4abf7351">_get_progress</a>(self, increment):
<a name="l00048"></a>00048         <span class="keywordflow">return</span> float(increment * 100) / self.<a class="code" href="classprogressbar_1_1ProgressBar.html#a46470a910a06dc2328d74c9da269f800">end</a>
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#ad47beed6bd8b7239d0e8ce37966c96e6">00050</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1ProgressBar.html#ad47beed6bd8b7239d0e8ce37966c96e6">set</a>(self, value):
<a name="l00051"></a>00051         value = self.<a class="code" href="classprogressbar_1_1ProgressBar.html#af11b2da67d3c42a65defe21b4abf7351">_get_progress</a>(value)
<a name="l00052"></a>00052         <span class="keywordflow">if</span> 100 &gt; value:
<a name="l00053"></a>00053             self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> = value 
<a name="l00054"></a>00054         <span class="keywordflow">else</span>:
<a name="l00055"></a>00055             self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> = 100
<a name="l00056"></a>00056         <span class="keywordflow">return</span> self
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="classprogressbar_1_1ProgressBar.html#a1e3174a60591ce40f957310b350d62d4">00058</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1ProgressBar.html#a1e3174a60591ce40f957310b350d62d4">reset</a>(self):
<a name="l00059"></a>00059         <span class="stringliteral">&quot;&quot;&quot;Resets the current progress to the start point&quot;&quot;&quot;</span>
<a name="l00060"></a>00060         self.<a class="code" href="classprogressbar_1_1ProgressBar.html#abec1e1566520ec7ea9522f56dccaa125">progress</a> = self.<a class="code" href="classprogressbar_1_1ProgressBar.html#af11b2da67d3c42a65defe21b4abf7351">_get_progress</a>(self.<a class="code" href="classprogressbar_1_1ProgressBar.html#afa2d297abaa373dfe45a2036b0d3c123">start</a>)
<a name="l00061"></a>00061         <span class="keywordflow">return</span> self
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html">00064</a> <span class="keyword">class </span><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html">AnimatedProgressBar</a>(<a class="code" href="classprogressbar_1_1ProgressBar.html">ProgressBar</a>):
<a name="l00065"></a>00065     <span class="stringliteral">&quot;&quot;&quot;Extends ProgressBar to allow you to use it straighforward on a script.</span>
<a name="l00066"></a>00066 <span class="stringliteral">    Accepts an extra keyword argument named `stdout` (by default use sys.stdout)</span>
<a name="l00067"></a>00067 <span class="stringliteral">    and may be any file-object to which send the progress status.</span>
<a name="l00068"></a>00068 <span class="stringliteral">    &quot;&quot;&quot;</span>
<a name="l00069"></a><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#a30d884afb012f2565e7ef52df5176a89">00069</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#a30d884afb012f2565e7ef52df5176a89">__init__</a>(self, *args, **kwargs):
<a name="l00070"></a>00070         super(AnimatedProgressBar, self).__init__(*args, **kwargs)
<a name="l00071"></a><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">00071</a>         self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a> = kwargs.get(<span class="stringliteral">&apos;stdout&apos;</span>, sys.stdout)
<a name="l00072"></a><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#abf3134500836a929ae445ecc9195ecde">00072</a>         self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#abf3134500836a929ae445ecc9195ecde">last_indicator</a> = <span class="stringliteral">&apos;&apos;</span>
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#a2b4fc789e3220d4ed1e1b9d538776c92">00074</a>     <span class="keyword">def </span><a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#a2b4fc789e3220d4ed1e1b9d538776c92">show_progress</a>(self):
<a name="l00075"></a>00075         indicator = str(self)
<a name="l00076"></a>00076         <span class="keywordflow">if</span> indicator == self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#abf3134500836a929ae445ecc9195ecde">last_indicator</a>:
<a name="l00077"></a>00077           <span class="keywordflow">return</span>
<a name="l00078"></a>00078         <span class="keywordflow">if</span> hasattr(self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a>, <span class="stringliteral">&apos;isatty&apos;</span>) <span class="keywordflow">and</span> self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a>.isatty():
<a name="l00079"></a>00079             self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a>.write(<span class="stringliteral">&apos;\r&apos;</span>)
<a name="l00080"></a>00080         <span class="keywordflow">else</span>:
<a name="l00081"></a>00081             self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a>.write(<span class="stringliteral">&apos;\n&apos;</span>)
<a name="l00082"></a>00082         self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a>.write(str(self))
<a name="l00083"></a>00083         self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#aa8ec5cac3f292b0b44d19338467793ae">stdout</a>.flush()
<a name="l00084"></a>00084         self.<a class="code" href="classprogressbar_1_1AnimatedProgressBar.html#abf3134500836a929ae445ecc9195ecde">last_indicator</a> = indicator
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keywordflow">if</span> __name__ == <span class="stringliteral">&apos;__main__&apos;</span>:
<a name="l00087"></a><a class="code" href="namespaceprogressbar.html#a5bff78442f584f9477b429912b328ac9">00087</a>     p = AnimatedProgressBar(end=100, width=80)
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keywordflow">while</span> <span class="keyword">True</span>:
<a name="l00090"></a>00090         p + 5
<a name="l00091"></a>00091         p.show_progress()
<a name="l00092"></a>00092         time.sleep(0.1)
<a name="l00093"></a>00093         <span class="keywordflow">if</span> p.progress == 100:
<a name="l00094"></a>00094             <span class="keywordflow">break</span>
<a name="l00095"></a>00095     <span class="keywordflow">print</span> <span class="comment">#new line</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 25 Jan 2018 for Cat by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
